@page "/sowing/insertpassport"
@inject IJSRuntime jsRuntime

@using Microsoft.AspNetCore.Authorization
@using ZXingBlazor.Components

@attribute [Authorize(Roles = "Administrator,Thai-Guy")]

    <h3>InsertPassport</h3>

@if (isDevice == "Mobile")
{
    <button class="btn btn-primary"
            type="button"
            @onclick="(() => ShowScanBarcode = !ShowScanBarcode)">
        @*ENTER SCAN*@
        แทรกการสแกน
    </button>
}

<input  type="text" class="form-control" style="width:auto;margin-right:auto"
       @bind-value="BarCode"
       placeholder="หมายเลขหนังสือเดินทาง" />
                    @*PASSPORT NUMBER*@
@if (ShowScanBarcode)
{

    <BarcodeReader ScanResult="((e) => { BarCode=e; ShowScanBarcode = !ShowScanBarcode; })"
                   ShowScanBarcode="ShowScanBarcode"
                   Close="(()=>ShowScanBarcode=!ShowScanBarcode)" />

}

@code {
    bool ShowScanBarcode { get; set; } = false;
    public string? BarCode { get; set; }

    private string isDevice { get; set; }
    private bool mobile { get; set; }
    public async Task FindResponsiveness()
    {
        mobile = await jsRuntime.InvokeAsync<bool>("isDevice");
        isDevice = mobile ? "Mobile" : "Desktop";

    }


}
